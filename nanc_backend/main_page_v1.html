<data id="gap"
      x1="4"
      x2="8"
      x3="16"
      x4="20"
      x5="24"
      x6="30"
/>

<!--! ================================================== TEMPLATES-->
<template id="text.h1">
  <text color="{{ page.primary_dark_color }}">
    <prop:textStyle font="{{ page.h1_font }}" size="41" weight="bold"/>
    {{ template.text }}
  </text>
</template>

<template id="text.h3">
  <text color="{{ page.primary_dark_color }}">
    <prop:textStyle font="{{ page.h3_font }}" size="29" weight="bold" color="{{ template.color }}"/>
    {{ template.text }}
  </text>
</template>

<template id="text.sub1">
  <text>
    <prop:textStyle font="{{ page.sub1_font }}" size="20" weight="w700" color="{{ template.color }}"/>
    {{ template.text }}
  </text>
</template>

<template id="text.sub3">
  <text>
    <prop:textStyle font="{{ page.sub3_font }}" size="16" weight="w500" color="{{ template.color }}"/>
    {{ template.text }}
  </text>
</template>

<template id="text.body">
  <text>
    <prop:textStyle font="{{ page.body_font }}" size="16" weight="w400" color="{{ template.color }}"/>
    {{ template.text }}
  </text>
</template>

<template id="button.primary">
  <stack>
    <container>
      <prop:decoration color="{{ page.primary_light_color }}">
        <prop:borderRadius all="8"/>
      </prop:decoration>
      <padding left="16" top="12" right="12" bottom="12">
        <row>
          <show show="{{ template.icon }}">
            <padding right="12">
              <icon icon="{{ template.icon }}" color="{{ page.primary_dark_color }}"/>
            </padding>
          </show>
          <expanded>
            <text align="{{ template.titleAlign }}">
              <prop:textStyle font="{{ page.primary_button_font }}" size="18" color="{{ page.primary_dark_color }}"/>
              {{ template.title }}
            </text>
          </expanded>
          <show show="{{ template.hasSuffix }}">
            <icon icon="flu_chevron_right_filled" color="{{ page.primary_dark_color }}"/>
          </show>
        </row>
      </padding>
    </container>
    <positioned all="0">
      <material type="transparency">
        <prop:borderRadius all="8"/>
        <inkWell onPressed="deeplink: {{ template.deeplink }}">
          <prop:borderRadius all="8"/>
        </inkWell>
      </material>
    </positioned>
  </stack>
</template>

<template id="card.result.indicator">
  <container>
    <prop:decoration color="{{ template.backgroundColor }}">
      <prop:borderRadius all="4"/>
    </prop:decoration>
    <padding all="{{ data(gap).x2 }}">
      <row>
        <container size="16">
          <prop:decoration color="{{ template.dotColor }}">
            <prop:borderRadius all="16"/>
          </prop:decoration>
        </container>
        <sizedBox width="{{ data(gap).x1 }}">
        </sizedBox>
        <text>
          <prop:textStyle color="{{ page.primary_dark_color }}" font="{{ page.primary_button_font }}" weight="bold"/>
          {{ template.text }}
        </text>
      </row>
    </padding>
  </container>
</template>

<template id="card.result">
  <container>
    <prop:decoration color="{{ page.surface_color }}">
      <prop:borderRadius all="8"/>
      <prop:shadow color="#25000000" offsetY="2" spreadRadius="-2" blurRadius="8"/>
    </prop:decoration>
    <padding left="{{ data(gap).x4 }}" top="{{ data(gap).x5 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x5 }}">
      <column crossAxisAlignment="start">
        <component id="text.sub1" text="{{ template.name }}"/>
        <sizedBox height="{{ data(gap).x1 }}">
        </sizedBox>
        <component id="text.body" text="{{ template.date }}"/>
        <sizedBox height="{{ data(gap).x1 }}">
        </sizedBox>
        <component id="text.body" text="{{ template.subtitle }}"/>
        <sizedBox height="{{ data(gap).x3 }}">
        </sizedBox>
        <show show="{{ template.inRange }}">
          <padding bottom="{{ data(gap).x3 }}">
            <row>
              <component id="card.result.indicator" text="In range" backgroundColor="#FFE2EBCC" dotColor="#FF09875D"/>
              <sizedBox width="{{ data(gap).x2 }}">
              </sizedBox>
              <component id="text.body" text="{{ template.inRange }}"/>
            </row>
          </padding>
        </show>
        <show show="{{ template.outOfRange }}">
          <padding bottom="{{ data(gap).x3 }}">
            <row>
              <component id="card.result.indicator" text="Out of range" backgroundColor="#FFFFE2A9"
                         dotColor="#FF965310"/>
              <sizedBox width="{{ data(gap).x2 }}">
              </sizedBox>
              <component id="text.body" text="{{ template.outOfRange }}"/>
            </row>
          </padding>
        </show>
        <show show="{{ template.uninterpreted }}">
          <padding bottom="{{ data(gap).x3 }}">
            <row>
              <component id="card.result.indicator" text="Uninterpreted" backgroundColor="#FFE2E0E0"
                         dotColor="#FF979797"/>
              <sizedBox width="{{ data(gap).x2 }}">
              </sizedBox>
              <component id="text.body" text="{{ template.uninterpreted }}"/>
            </row>
          </padding>
        </show>
        <sizedBox height="{{ data(gap).x2 }}">
        </sizedBox>
        <component id="button.primary" title="View more" titleAlign="center" deeplink="/results"/>
      </column>
    </padding>
  </container>
</template>

<template id="card.product">
  <aspectRatio ratio="0.7">
    <padding bottom="{{ data(gap).x2 }}">
      <stack>
        <container>
          <prop:decoration color="{{ page.card_background_color }}">
            <prop:borderRadius all="24"/>
            <prop:shadow color="{{ page.shadow_color }}" offsetY="4" blurRadius="4" spreadRadius="-2"/>
          </prop:decoration>
          <column crossAxisAlignment="stretch">
            <expanded>
              <padding top="{{ data(gap).x3 }}" bottom="{{ data(gap).x3 }}">
                <center>
                  <stack>
                    <positioned all="0">
                      <container>
                        <prop:decoration>
                          <prop:shadow color="{{ page.shadow_color }}" offsetY="3" offsetX="6" blurRadius="0"
                                       spreadRadius="-10"/>
                        </prop:decoration>
                      </container>
                    </positioned>
                    <image ref="{{ template.image }}"/>
                  </stack>
                </center>
              </padding>
            </expanded>
            <container color="{{ page.secondary_light_color }}">
              <prop:decoration>
                <prop:borderRadius bottomLeft="24" bottomRight="24"/>
              </prop:decoration>
              <padding top="{{ data(gap).x2 }}" bottom="{{ data(gap).x2 }}">
                <column>
                  <component id="text.sub3" text="{{ template.title }}"/>
                  <component id="text.body" text="{{ template.price }}"/>
                </column>
              </padding>
            </container>
          </column>
        </container>
        <positioned all="0">
          <material type="transparency">
            <prop:borderRadius all="24"/>
            <inkWell onPressed="deeplink: {{ template.deeplink }}">
              <prop:borderRadius all="24"/>
            </inkWell>
          </material>
        </positioned>
      </stack>
    </padding>
  </aspectRatio>
</template>

<!--! ================================================== CONTENT-->
<!--? HEADER-->
<container>
  <prop:decoration color="{{ page.background_color }}">
  </prop:decoration>

  <safeArea>
    <padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x2 }}">
      <component id="text.h1" text="{{ page.view_title }} {{ page.username }}"/>
    </padding>
    <padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}">
      <component id="text.body" text="{{ page.view_subtitle }}"/>
    </padding>
  </safeArea>
  <stack>
    <positioned all="0">
      <container color="{{ page.background_color }}">
      </container>
    </positioned>
    <container height="22" width="1000">
      <prop:decoration color="{{ page.surface_color }}">
        <prop:borderRadius topLeft="20" topRight="20"/>
      </prop:decoration>
    </container>
  </stack>
</container>

<!--? SUB-HEADER-->
<padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x5 }}">
  <column crossAxisAlignment="start">
    <component id="text.h3" text="{{ page.secondary_title }}" color="{{ page.on_surface_color }}"/>
    <sizedBox height="{{ data(gap).x2 }}">
    </sizedBox>
    <component id="text.body" text="{{ page.secondary_subtitle }}"/>
  </column>
</padding>

<!--? ACTION BUTTONS-->
<for valueName="button" in="{{ page.action_buttons }}">
  <padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x4 }}">
    <component id="button.primary"
               title="{{ cycle.button.title }}"
               icon="{{ cycle.button.prefix_icon }}"
               deeplink="{{ cycle.button.deeplink }}"
               hasSuffix="true"
    />
  </padding>
</for>

<!--? RESULTS-->
<show show="{{ page.results_details.0 }}">
  <padding bottom="{{ data(gap).x6 }}">
    <container color="{{ page.background_color }}">
      <padding all="{{ data(gap).x4 }}">
        <column>
          <row>
            <expanded>
              <component id="text.h3" text="{{ page.results_header_title }}" color="{{ page.on_surface_color }}"/>
            </expanded>
            <textButton text="View all >" onPressed="/tests">
              <prop:buttonStyle foregroundColor="{{ page.primary_dark_color }}"/>
            </textButton>
          </row>
          <sizedBox height="{{ data(gap).x5 }}">
          </sizedBox>
          <component id="card.result"
                     name="{{ page.results_details.0.title }}"
                     date="{{ page.results_details.0.date }}"
                     subtitle="{{ page.results_details.0.subtitle }} {{ page.results_details.0.doctor }}"
                     inRange="{{ page.results_details.0.in_range }} {{ page.results_details.0.biomarkers_suffix }}"
                     outOfRange="{{ page.results_details.0.out_of_range }} {{ page.results_details.0.biomarkers_suffix }}"
                     uninterpreted="{{ page.results_details.0.uninterpreted }} {{ page.results_details.0.biomarkers_suffix }}"
          />
        </column>
      </padding>
    </container>
  </padding>
</show>

<!--? PRODUCTS HEADER-->
<padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x3 }}">
  <column crossAxisAlignment="start">
    <component id="text.h3" text="{{ page.tests_title }}" color="{{ page.on_surface_color }}"/>
    <sizedBox height="{{ data(gap).x2 }}">
    </sizedBox>
    <component id="text.body" text="{{ page.tests_subtitle }}" color="{{ page.on_surface_color }}"/>
  </column>
</padding>

<!--? PRODUCTS-->
<for valueName="group" in="{{ page.tests_groups }}">
  <padding bottom="{{ data(gap).x5 }}">
    <column crossAxisAlignment="start">
      <padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x4 }}">
        <component id="text.sub1" text="{{ cycle.group.title }}" color="{{ page.primary_dark_color }}"/>
      </padding>
      <stack>
        <positioned left="0" top="60" right="0" bottom="0">
          <container color="{{ page.background_color }}">
          </container>
        </positioned>
        <sizedBox height="280">
          <listView axis="horizontal">
            <for valueName="product" indexName="productIndex" in="{{ cycle.group.products }}">
              <show show="{{ cycle.productIndex }}">
                <padding right="{{ data(gap).x3 }}">
                  <component id="card.product"
                             title="{{ cycle.product.title }}"
                             image="{{ cycle.product.image_path }}"
                             price="{{ cycle.product.price }}"
                             deeplink="{{ cycle.product.deeplink }}"/>
                </padding>
              </show>
              <show notShow="{{ cycle.productIndex }}">
                <padding left="{{ data(gap).x3 }}" right="{{ data(gap).x3 }}">
                  <component id="card.product"
                             title="{{ cycle.product.title }}"
                             image="{{ cycle.product.image_path }}"
                             price="{{ cycle.product.price }}"
                             deeplink="{{ cycle.product.deeplink }}"/>
                </padding>
              </show>
            </for>
          </listView>
        </sizedBox>
      </stack>
      <container color="{{ page.background_color }}">
        <sizedBox height="{{ data(gap).x5 }}">
        </sizedBox>

        <padding left="{{ data(gap).x4 }}" right="{{ data(gap).x4 }}" bottom="{{ data(gap).x5 }}">
          <component id="button.primary"
                     title="{{ cycle.group.button_title }}"
                     deeplink="{{ cycle.group.button_deeplink }}"
                     titleAlign="center"/>
        </padding>
      </container>
    </column>
  </padding>
</for>

<sizedBox height="{{ data(gap).x6 }}">
</sizedBox>